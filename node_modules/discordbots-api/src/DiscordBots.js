const snek = require('snekfetch');

class DiscordBots {
    constructor(token) {
        this.token = token;
        if (typeof token != 'string') throw new SyntaxError('Discord Bots List token must be a string.');
    }

    /**
     * Post stats.
     * @param {Number} servers - Server Count
     * @param {Number} id - ID.
     */
    postStats(servers, id) {
        snek.post(`https://bots.discord.pw/api/bots/${id}/stats`)
            .set('Authorization', this.token)
            .send({
                server_count: servers
            })
            .catch((err) => new Error('Error has concluded.\n' + err));
    }

    /**
     * Get some information about a bot.
     * @param {Number} id - ID of the bot.
     */
    getBot(id) {
        return new Promise((reject, resolve) => {
            snek.get(`https://bots.discord.pw/api/bots/${id}`)
                .then((res) => resolve(res))
                .catch(err => reject(err));
        });
    }
}

module.exports = DiscordBots;